"use strict";var e=require("./index-e1329adc.js"),r=require("path"),t=require("child_process"),n=require("fs"),o=require("os");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("atom"),require("util");var s=i(r),a=i(t),c=i(n),u=i(o),l={exports:{}};const p=c.default;let f;var d=()=>(void 0===f&&(f=function(){try{return p.statSync("/.dockerenv"),!0}catch(e){return!1}}()||function(){try{return p.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(e){return!1}}()),f);const g=u.default,m=c.default,h=d,w=()=>{if("linux"!==process.platform)return!1;if(g.release().toLowerCase().includes("microsoft"))return!h();try{return!!m.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!h()}catch(e){return!1}};process.env.__IS_WSL_TEST__?l.exports=w:l.exports=w();const x=s.default,y=a.default,{promises:S,constants:v}=c.default,A=l.exports,E=d,b=(e,r,t)=>{const n=t=>Object.defineProperty(e,r,{value:t,enumerable:!0,writable:!0});return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get(){const e=t();return n(e),e},set(e){n(e)}}),e},P=x.join(__dirname,"xdg-open"),{platform:_,arch:I}=process,N=(()=>{const e="/mnt/";let r;return async function(){if(r)return r;const t="/etc/wsl.conf";let n=!1;try{await S.access(t,v.F_OK),n=!0}catch{}if(!n)return e;const o=await S.readFile(t,{encoding:"utf8"}),i=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(o);return i?(r=i.groups.mountPoint.trim(),r=r.endsWith("/")?r:`${r}/`,r):e}})(),W=async(e,r)=>{let t;for(const n of e)try{return await r(n)}catch(e){t=e}throw t},C=async e=>{if(e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e},Array.isArray(e.app))return W(e.app,(r=>C({...e,app:r})));let r,{name:t,arguments:n=[]}=e.app||{};if(n=[...n],Array.isArray(t))return W(t,(r=>C({...e,app:{name:r,arguments:n}})));const o=[],i={};if("darwin"===_)r="open",e.wait&&o.push("--wait-apps"),e.background&&o.push("--background"),e.newInstance&&o.push("--new"),t&&o.push("-a",t);else if("win32"===_||A&&!E()){const s=await N();r=A?`${s}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,o.push("-NoProfile","-NonInteractive","â€“ExecutionPolicy","Bypass","-EncodedCommand"),A||(i.windowsVerbatimArguments=!0);const a=["Start"];e.wait&&a.push("-Wait"),t?(a.push(`"\`"${t}\`""`,"-ArgumentList"),e.target&&n.unshift(e.target)):e.target&&a.push(`"${e.target}"`),n.length>0&&(n=n.map((e=>`"\`"${e}\`""`)),a.push(n.join(","))),e.target=Buffer.from(a.join(" "),"utf16le").toString("base64")}else{if(t)r=t;else{const e=!__dirname||"/"===__dirname;let t=!1;try{await S.access(P,v.X_OK),t=!0}catch{}r=process.versions.electron||"android"===_||e||!t?"xdg-open":P}n.length>0&&o.push(...n),e.wait||(i.stdio="ignore",i.detached=!0)}e.target&&o.push(e.target),"darwin"===_&&n.length>0&&o.push("--args",...n);const s=y.spawn(r,o,i);return e.wait?new Promise(((r,t)=>{s.once("error",t),s.once("close",(n=>{e.allowNonzeroExitCode&&n>0?t(new Error(`Exited with code ${n}`)):r(s)}))})):(s.unref(),s)},F=(e,r)=>{if("string"!=typeof e)throw new TypeError("Expected a `target`");return C({...r,target:e})};function $(e){if("string"==typeof e||Array.isArray(e))return e;const{[I]:r}=e;if(!r)throw new Error(`${I} is not supported`);return r}function j({[_]:e},{wsl:r}){if(r&&A)return $(r);if(!e)throw new Error(`${_} is not supported`);return $(e)}const q={};b(q,"chrome",(()=>j({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}))),b(q,"firefox",(()=>j({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}))),b(q,"edge",(()=>j({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}))),F.apps=q,F.openApp=(e,r)=>{if("string"!=typeof e)throw new TypeError("Expected a `name`");const{arguments:t=[]}=r||{};if(null!=t&&!Array.isArray(t))throw new TypeError("Expected `appArguments` as Array type");return C({...r,app:{name:e,arguments:t}})};var k=F;exports.findErrors=async function(e,r){const t=await Promise.resolve().then((function(){return require("./index-e4af7f8a.js")})).then((function(e){return e.index})),n=[],o=/(?<message>.*)\r?\n.*rror in script:? "(?<file>.*)" on line (?<line>\d+)/.exec(r);return null!==o&&n.push({severity:"error",excerpt:o.groups.message,location:{file:o.groups.file,position:t.generateRange(e,parseInt(o.groups.line)-1)}}),n},exports.findWarnings=async function(r,t,n){const o=await Promise.resolve().then((function(){return require("./index-e4af7f8a.js")})).then((function(e){return e.index}));return!e.config.get("advanced.muteANSIDeprecationWarning")&&t.includes("7998: ANSI targets are deprecated")&&this.showANSIDeprecationWarning(),t.split("\n").map((e=>{const t=/warning: (?<message>.*) \((?<file>.*)?:(?<line>\d+)\)/.exec(e),i=n.strict?"error":"warning";if(t)return{severity:i,excerpt:t.groups.message,location:{file:t.groups.file,position:o.generateRange(r,parseInt(t.groups.line)-1)}}})).filter((e=>e))},exports.showANSIDeprecationWarning=function(){const r=atom.notifications.addWarning("ANSI targets are deprecated as of NSIS v3.05, consider moving to Unicode",{dismissable:!0,buttons:[{text:"Unicode Installer",className:"icon icon-search",onDidClick:function(){k("https://idleberg.github.io/NSIS.docset/Contents/Resources/Documents/html/Reference/Unicode.html?utm_source=atom"),r.dismiss()}},{text:"Mute Warning",className:"icon icon-gear",onDidClick:function(){atom.config.set(`${e.name}.advanced.muteANSIDeprecationWarning`,!0),r.dismiss()}}]})};
//# sourceMappingURL=util-d50d79d8.js.map
