"use strict";var e=require("path"),n=require("fs"),t=require("child_process"),r=require("assert"),o=require("./_commonjsHelpers-68cdf74f.js"),i=require("crypto");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=a(e),c=a(n),s=a(t),f=a(r),l=a(i),d={},p={},v="[object GeneratorFunction]",h=/^\[object .+?Constructor\]$/,m="object"==typeof o.commonjsGlobal&&o.commonjsGlobal&&o.commonjsGlobal.Object===Object&&o.commonjsGlobal,y="object"==typeof self&&self&&self.Object===Object&&self,g=m||y||Function("return this")();function _(e,n){return!!(e?e.length:0)&&function(e,n,t){if(n!=n)return function(e,n,t,r){var o=e.length,i=t+(r?1:-1);for(;r?i--:++i<o;)if(n(e[i],i,e))return i;return-1}(e,b,t);var r=t-1,o=e.length;for(;++r<o;)if(e[r]===n)return r;return-1}(e,n,0)>-1}function w(e,n,t){for(var r=-1,o=e?e.length:0;++r<o;)if(t(n,e[r]))return!0;return!1}function b(e){return e!=e}function E(e,n){return e.has(n)}function x(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=e})),t}var S,O=Array.prototype,j=Function.prototype,P=Object.prototype,A=g["__core-js_shared__"],N=(S=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",C=j.toString,T=P.hasOwnProperty,R=P.toString,H=RegExp("^"+C.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=O.splice,L=B(g,"Map"),k=B(g,"Set"),I=B(Object,"create");function M(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function $(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function K(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function D(e){var n=-1,t=e?e.length:0;for(this.__data__=new K;++n<t;)this.add(e[n])}function z(e,n){for(var t,r,o=e.length;o--;)if((t=e[o][0])===(r=n)||t!=t&&r!=r)return o;return-1}function G(e){return!(!U(e)||(n=e,N&&N in n))&&(function(e){var n=U(e)?R.call(e):"";return"[object Function]"==n||n==v}(e)||function(e){var n=!1;if(null!=e&&"function"!=typeof e.toString)try{n=!!(e+"")}catch(e){}return n}(e)?H:h).test(function(e){if(null!=e){try{return C.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var n}M.prototype.clear=function(){this.__data__=I?I(null):{}},M.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},M.prototype.get=function(e){var n=this.__data__;if(I){var t=n[e];return"__lodash_hash_undefined__"===t?void 0:t}return T.call(n,e)?n[e]:void 0},M.prototype.has=function(e){var n=this.__data__;return I?void 0!==n[e]:T.call(n,e)},M.prototype.set=function(e,n){return this.__data__[e]=I&&void 0===n?"__lodash_hash_undefined__":n,this},$.prototype.clear=function(){this.__data__=[]},$.prototype.delete=function(e){var n=this.__data__,t=z(n,e);return!(t<0)&&(t==n.length-1?n.pop():F.call(n,t,1),!0)},$.prototype.get=function(e){var n=this.__data__,t=z(n,e);return t<0?void 0:n[t][1]},$.prototype.has=function(e){return z(this.__data__,e)>-1},$.prototype.set=function(e,n){var t=this.__data__,r=z(t,e);return r<0?t.push([e,n]):t[r][1]=n,this},K.prototype.clear=function(){this.__data__={hash:new M,map:new(L||$),string:new M}},K.prototype.delete=function(e){return q(this,e).delete(e)},K.prototype.get=function(e){return q(this,e).get(e)},K.prototype.has=function(e){return q(this,e).has(e)},K.prototype.set=function(e,n){return q(this,e).set(e,n),this},D.prototype.add=D.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},D.prototype.has=function(e){return this.__data__.has(e)};var W=k&&1/x(new k([,-0]))[1]==1/0?function(e){return new k(e)}:function(){};function q(e,n){var t,r,o=e.__data__;return("string"==(r=typeof(t=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?o["string"==typeof n?"string":"hash"]:o.map}function B(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return G(t)?t:void 0}function U(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}var X=function(e){return e&&e.length?function(e,n,t){var r=-1,o=_,i=e.length,a=!0,u=[],c=u;if(t)a=!1,o=w;else if(i>=200){var s=n?null:W(e);if(s)return x(s);a=!1,o=E,c=new D}else c=n?[]:u;e:for(;++r<i;){var f=e[r],l=n?n(f):f;if(f=t||0!==f?f:0,a&&l==l){for(var d=c.length;d--;)if(c[d]===l)continue e;n&&c.push(l),u.push(f)}else o(c,l,t)||(c!==u&&c.push(l),u.push(f))}return u}(e):[]},Y={exports:{}},Z={};Object.defineProperty(Z,"__esModule",{value:!0}),Z.assign=Z.CACHE_KEY=Z.KNOWN_SHELLS=void 0,Z.identifyEnvironment=function(){var e=te(),n=e.command,t=e.parameters,r=e.options;return r.timeout=4e3,(0,Q.spawnSync)(n,t,r).stdout.toString().split("\0")},Z.identifyEnvironmentAsync=function(){return new Promise((function(e,n){var t=te(),r=t.command,o=t.parameters,i=t.options,a=(0,Q.spawn)(r,o,i),u=[],c=setTimeout((function(){a.kill(),n(new Error("Process execution timed out"))}),4e3);a.stdout.on("data",(function(e){u.push(e)})),a.on("close",(function(){clearTimeout(c),e(u.join("").split("\0"))})),a.on("error",(function(e){n(e)}))}))},Z.parse=function(e){var n={},t=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var u=i.value,c=u.indexOf("=");if(-1!==c){var s=u.slice(0,c),f=u.slice(c+1);n[s]=f}}}catch(e){r=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw o}}return n},Z.applySugar=function(e){var n=process.env.PATH?process.env.PATH.split(":"):[];if(e.PATH){var t=!0,r=!1,o=void 0;try{for(var i,a=e.PATH.split(":")[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var u=i.value;u&&-1===n.indexOf(u)&&n.push(u)}}catch(e){r=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw o}}}var c=!0,s=!1,f=void 0;try{for(var l,d=ne[Symbol.iterator]();!(c=(l=d.next()).done);c=!0){var p=l.value;-1===n.indexOf(p)&&(n=[p].concat(n))}}catch(e){s=!0,f=e}finally{try{!c&&d.return&&d.return()}finally{if(s)throw f}}e.USER||(process.env.USER?e.USER=process.env.USER:e.HOME&&(e.USER=V.default.basename(e.HOME)));return e.PATH=(0,J.default)(n).join(":"),e.PWD=process.cwd(),e.OLDPWD=e.PWD,e},Z.getCommand=te;var V=ee(u.default),J=ee(X),Q=s.default;function ee(e){return e&&e.__esModule?e:{default:e}}var ne=["/bin","/sbin","/usr/bin","/usr/sbin","/usr/local/bin","/usr/local/sbin"];function te(){var e='import os;print(\\"\\0\\".join(map(\\"=\\".join, dict(os.environ).items()))+\\"\\0\\")',n='python -c "'+e+'"||python3 -c "'+e+'"||env|sed -n -e "s/^\\([A-Za-z_][A-Za-z0-9_]*\\)=.*/\\1/p"|while read name;do [ "$name" != "_" -a -n "$(eval "printf \\"%s\\" \\"\\${$name+x}\\"")" ]&&value="$(eval "printf \\"%s\\" \\"\\${$name}\\"")"&&printf "%s=%s\\0" "$name" "$value";done;exit;',t="sh -c '"+n+"';exit;",r=process.env.SHELL||"sh",o=["-c",t],i=V.default.basename(r);return"bash"===i?o=["-c","source ~/.bashrc;source ~/.bash_profile;"+n]:"zsh"===i?o=["-c","source ~/.zshrc;"+n]:"fish"===i?o=["-c","source ~/.config/fish/config.fish;"+t]:"sh"!==i&&"ksh"!==i||(o=["-c",n]),{command:r,parameters:o,options:{encoding:"utf8"}}}Z.KNOWN_SHELLS=["zsh","bash","fish"],Z.CACHE_KEY="__STEELBRAIN_CONSISTENT_ENV_V1",Z.assign=Object.assign||function(e,n){for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e};var re,oe=u.default,ie=(re=oe)&&re.__esModule?re:{default:re},ae=Z;Y.exports=function(){if("win32"===process.platform||!process.env.SHELL)return(0,ae.assign)({},process.env);if(o.commonjsGlobal[ae.CACHE_KEY])return(0,ae.assign)({},o.commonjsGlobal[ae.CACHE_KEY]);var e=ie.default.basename(process.env.SHELL);if(-1===ae.KNOWN_SHELLS.indexOf(e))return(0,ae.assign)({},process.env);try{var n=(0,ae.applySugar)((0,ae.parse)((0,ae.identifyEnvironment)()));return o.commonjsGlobal[ae.CACHE_KEY]=n,n}catch(e){return console.error("[consistent-env] Unable to determine environment",e),(0,ae.assign)({},process.env)}},Y.exports.async=function(){return new Promise((function(e){if("win32"!==process.platform&&process.env.SHELL)if(o.commonjsGlobal[ae.CACHE_KEY])e((0,ae.assign)({},o.commonjsGlobal[ae.CACHE_KEY]));else{var n=ie.default.basename(process.env.SHELL);-1===ae.KNOWN_SHELLS.indexOf(n)?e((0,ae.assign)({},process.env)):e((0,ae.identifyEnvironmentAsync)().then(ae.parse).then(ae.applySugar).then((function(e){return o.commonjsGlobal[ae.CACHE_KEY]=e,e})))}else e((0,ae.assign)({},process.env))})).catch((function(e){return console.error("[consistent-env] Unable to determine environment",e),(0,ae.assign)({},process.env)}))};var ue={},ce={},se=Symbol("cache deleted");var fe=function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];function t(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=JSON.stringify(o),u=o.length;if(a in t.__sb_cache&&t.__sb_cache[a]!==se){var c=t.__sb_cache[a];return!n.async||c&&"Promise"===c.constructor.name?c:Promise.resolve(c)}var s=void 0;if(s=1===u?e.call(this,o[0]):2===u?e.call(this,o[0],o[1]):3===u?e.call(this,o[0],o[1],o[2]):4===u?e.call(this,o[0],o[1],o[2],o[3]):e.apply(this,o),t.__sb_cache[a]=s,n.async){if(!s||"Promise"!==s.constructor.name)throw new Error("Memoization Error, Async function returned non-promise value");return s.then((function(e){return t.__sb_cache[a]=e,e}),(function(e){throw t.__sb_cache[a]=se,e}))}return s}return t.__sb_cache={},t},le={};function de(e){var n=arguments.length<=1||void 0===arguments[1]||arguments[1];return function(){for(var t=this,r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=new Promise((function(n,r){o.push((function(e,t){e?r(e):n(t)})),e.apply(t,o)}));return n||(a=a.then((function(e){return void 0===e||e})).catch((function(){return!1}))),a}}Object.defineProperty(le,"__esModule",{value:!0}),le.default=de,le.promisify=de,le.promisifyAll=function(e){var n=arguments.length<=1||void 0===arguments[1]||arguments[1],t=Object.assign({},e);for(var r in t)({}).hasOwnProperty.call(t,r)&&"function"==typeof t[r]&&(t[r+"Async"]=de(t[r],n));return t},Object.defineProperty(ce,"__esModule",{value:!0}),ce.findAsync=ce.find=void 0;var pe,ve,he=(pe=function*(e,n){for(var t=[].concat(n),r=e.split(me.default.sep);r.length;){var o=r.join(me.default.sep);""===o&&(o=me.default.resolve(e,"/"));for(var i=0,a=t.length;i<a;++i){var u=t[i],c=me.default.join(o,u);try{return yield we(c,ye.default.R_OK),c}catch(e){}}r.pop()}return null},ve=function(){var e=pe.apply(this,arguments);return new Promise((function(n,t){function r(o,i){try{var a=e[o](i),u=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(u).then((function(e){return r("next",e)}),(function(e){return r("throw",e)}));n(u)}return r("next")}))},function(e,n){return ve.apply(this,arguments)}),me=_e(u.default),ye=_e(c.default),ge=_e(fe);function _e(e){return e&&e.__esModule?e:{default:e}}var we=(0,_e(le).default)(ye.default.access);ce.find=(0,ge.default)((function(e,n){for(var t=[].concat(n),r=e.split(me.default.sep);r.length;){var o=r.join(me.default.sep);""===o&&(o=me.default.resolve(e,"/"));for(var i=0,a=t.length;i<a;++i){var u=t[i],c=me.default.join(o,u);try{return ye.default.accessSync(c,ye.default.R_OK),c}catch(e){}}r.pop()}return null})),ce.findAsync=(0,ge.default)(he,{async:!0}),Object.defineProperty(ue,"__esModule",{value:!0}),ue.clearCache=ue.getPathAsync=ue.getPath=void 0;var be=function(){var e=function(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){function r(o,i){try{var a=n[o](i),u=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(u).then((function(e){return r("next",e)}),(function(e){return r("throw",e)}));e(u)}return r("next")}))}}((function*(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],n=e;return n||(n=process.cwd()),(yield(0,xe.findAsync)(n,Ee.default.join("node_modules",".bin")))||""}));return function(n){return e.apply(this,arguments)}}(),Ee=function(e){return e&&e.__esModule?e:{default:e}}(u.default),xe=ce;function Se(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],n=e;return n||(n=process.cwd()),(0,xe.find)(n,Ee.default.join("node_modules",".bin"))||""}ue.default=Se,ue.getPath=Se,ue.getPathAsync=be,ue.clearCache=function(){xe.find.__sb_cache={},xe.findAsync.__sb_cache={}},Object.defineProperty(p,"__esModule",{value:!0}),p.getSpawnOptions=void 0;var Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};p.getSpawnOptions=function(){var e=function(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){function r(o,i){try{var a=n[o](i),u=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}return r("next")}))}}((function*(e){var n=Object.assign({},e,{env:Fe(yield(0,Ne.async)(),e.env)}),t=void 0,r=e.local;if(r&&(t=yield(0,Ce.getPathAsync)(r.directory)),r&&t)for(var o in n.env)if({}.hasOwnProperty.call(n.env,o)&&"PATH"===o){var i=n.env[o];n.env[o]=r.prepend?t+Re+i:i+Re+t;break}return delete n.timeout,n.env.OS&&(n.env.OS=void 0),process.versions.electron&&(n.env.ELECTRON_RUN_AS_NODE="1",n.env.ATOM_SHELL_INTERNAL_RUN_AS_NODE="1",n.env.ELECTRON_NO_ATTACH_CONSOLE="1"),n}));return function(n){return e.apply(this,arguments)}}(),p.validate=function(e,n,t){var r=Object.assign({},t);if((0,Pe.default)("string"==typeof e&&e,"filePath must be a string"),(0,Pe.default)(Array.isArray(n),"parameters must be an array"),(0,Pe.default)("object"===(void 0===r?"undefined":Oe(r))&&r,"options must be an object"),r.stream){var o=r.stream;(0,Pe.default)("both"===o||"stdout"===o||"stderr"===o,"options.stream should be stdout|stderr|both")}else r.stream="stdout";r.timeout?(0,Pe.default)("number"==typeof r.timeout,"options.timeout must be a number"):r.timeout=1/0;r.env?(0,Pe.default)("object"===Oe(r.env),"options.env must be an object"):r.env={};r.stdin?(0,Pe.default)("string"==typeof r.stdin||Buffer.isBuffer(r.stdin),"options.stdin must be a string or a Buffer"):r.stdin=null;void 0!==r.throwOnStderr?(0,Pe.default)("boolean"==typeof r.throwOnStderr,"options.throwOnStderr must be a boolean"):r.throwOnStderr=!0;void 0!==r.local&&((0,Pe.default)("object"===Oe(r.local),"options.local must be an object"),(0,Pe.default)("string"==typeof r.local.directory,"options.local.directory must be a string"),void 0!==r.local.prepend?(0,Pe.default)("boolean"==typeof r.local.prepend,"options.local.prepend must be a boolean"):r.local.prepend=!1);void 0!==r.allowEmptyStderr?(0,Pe.default)("boolean"==typeof r.allowEmptyStderr,"options.throwWhenEmptyStderr must be a boolean"):r.allowEmptyStderr=!1;void 0!==r.ignoreExitCode?(0,Pe.default)("boolean"==typeof r.ignoreExitCode,"options.ignoreExitCode must be a boolean"):r.ignoreExitCode=!1;return r},p.mergePath=He,p.mergeEnv=Fe,p.escape=function(e){return'"'+String(e).replace(/"/g,'\\"')+'"'},p.shouldNormalizeForWindows=function(e,n){var t=je.default.basename(e);return"win32"===process.platform&&!n.shell&&"cmd.exe"!==t&&"cmd"!==t},p.getENOENTError=function(e,n){var t=new Error("spawn "+e+" ENOENT");return t.code="ENOENT",t.errno="ENOENT",t.syscall="spawn "+e,t.path=e,t.spawnargs=n,t};var je=Te(u.default),Pe=Te(f.default),Ae=Te(X),Ne=Y.exports,Ce=ue;function Te(e){return e&&e.__esModule?e:{default:e}}var Re="win32"===process.platform?";":":";function He(e,n){return(0,Ae.default)(e.split(";").concat(n.split(";")).map((function(e){return e.trim()})).filter((function(e){return e}))).join(";")}function Fe(e,n){if("win32"!==process.platform)return Object.assign(e,n);var t={PATH:""};for(var r in e)"PATH"===r.toUpperCase()?t.PATH=He(t.PATH,e[r]):t[r]=e[r];for(var o in n)"PATH"===o.toUpperCase()?t.PATH=He(t.PATH,n[o]):t[o]=n[o];return t}var Le,ke=function(){var e=De((function*(e,n,t,r){var o=yield(0,Ke.getSpawnOptions)(t),i=e,a=n,u=!1;if((0,Ke.shouldNormalizeForWindows)(i,t)){o.windowsVerbatimArguments=!0;var c=[i];/\s/.test(i)&&(c=c.map(Ke.escape)),c=c.concat(a.map(Ke.escape)),i=process.env.comspec||"cmd.exe",a=["/s","/c",'"'+c.join(" ")+'"'],u=!0}return new Promise((function(c,s){var f=(0,$e.spawn)(i,a,o),l={stdout:[],stderr:[]},d=void 0;if(f.stdout&&f.stdout.on("data",(function(e){l.stdout.push(e)})),f.stderr&&f.stderr.on("data",(function(e){l.stderr.push(e)})),f.on("error",(function(e){s(e)})),f.on("close",(function(r){clearTimeout(d);var o=l.stdout.join("").trim(),i=l.stderr.join("").trim();u&&i==="'"+e+"' is not recognized as an internal or external command,\r\noperable program or batch file."?s((0,Ke.getENOENTError)(e,n)):"stdout"===t.stream?i&&t.throwOnStderr?s(new Error(i)):0===r||t.ignoreExitCode?c(o):(console.error("[exec] Process exited with no-zero code, stdout: ",o),s(new Error("Process exited with non-zero code: "+r))):"stderr"===t.stream?0!==i.length||t.allowEmptyStderr?c(i):s(new Error("Process exited with no output, code: "+r)):c({stdout:o,stderr:i,exitCode:r})})),f.stdin){if(t.stdin)try{f.stdin.write(t.stdin)}catch(e){}try{f.stdin.end()}catch(e){}}t.timeout!==1/0&&(d=setTimeout((function(){Ie(f),s(new Error("Process execution timed out"))}),t.timeout)),r(f)}))}));return function(n,t,r,o){return e.apply(this,arguments)}}(),Ie=(Le=De((function*(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SIGTERM",t=Me.default.basename(e.spawnfile);if("win32"===process.platform&&"wmic.exe"!==t&&"wmic"!==t)try{var r=yield ze("wmic",["process","where","(ParentProcessId="+e.pid+")","get","processid"],{stream:"stdout",timeout:6e4});r.split(/\s+/).filter((function(e){return/^\d+$/.test(e)})).map((function(e){return parseInt(e,10)})).filter((function(n){return n!==e.pid&&n>0})).forEach((function(e){process.kill(e,n)}))}catch(e){}else e.kill(n)})),function(e){return Le.apply(this,arguments)}),Me=function(e){return e&&e.__esModule?e:{default:e}}(u.default),$e=s.default,Ke=p;function De(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function r(o,i){try{var a=n[o](i),u=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}function ze(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,Ke.validate)(e,n,t),o=null,i=null,a=ke(e,n,r,(function(e){o?Ie(e,o):i=e}));return a.kill=function(e){i?Ie(i,e):o=e||"SIGTERM"},a}var Ge={exec:ze,execNode:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,Ke.validate)(e,n,t),ze(process.execPath,[e].concat(n),t)}},We={},qe={},Be="win32"===process.platform,Ue=Be?/[^:]\\$/:/.\/$/;
/*!
 * Tmp
 *
 * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */
const Xe=c.default,Ye=u.default,Ze=l.default,Ve=function(){var e;return e=Be?process.env.TEMP||process.env.TMP||(process.env.SystemRoot||process.env.windir)+"\\temp":process.env.TMPDIR||process.env.TMP||process.env.TEMP||"/tmp",Ue.test(e)&&(e=e.slice(0,-1)),e},Je=process.binding("constants"),Qe=Ve(),en="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",nn=/XXXXXX/,tn=(Je.O_CREAT||Je.fs.O_CREAT)|(Je.O_EXCL||Je.fs.O_EXCL)|(Je.O_RDWR||Je.fs.O_RDWR),rn=Je.EBADF||Je.os.errno.EBADF,on=Je.ENOENT||Je.os.errno.ENOENT,an=[];var un=!1,cn=!1;function sn(e){var n=[],t=null;try{t=Ze.randomBytes(e)}catch(n){t=Ze.pseudoRandomBytes(e)}for(var r=0;r<e;r++)n.push(en[t[r]%en.length]);return n.join("")}function fn(e){return void 0===e}function ln(e,n){return"function"==typeof e?[n||{},e]:fn(e)?[{},n]:[e,n]}function dn(e){if(e.name)return Ye.join(e.dir||Qe,e.name);if(e.template)return e.template.replace(nn,sn(6));const n=[e.prefix||"tmp-",process.pid,sn(12),e.postfix||""].join("");return Ye.join(e.dir||Qe,n)}function pn(e,n){var t=ln(e,n),r=t[0],o=t[1],i=r.name?1:r.tries||3;return isNaN(i)||i<0?o(new Error("Invalid tries")):r.template&&!r.template.match(nn)?o(new Error("Invalid template provided")):void function e(){const n=dn(r);Xe.stat(n,(function(t){if(!t)return i-- >0?e():o(new Error("Could not get a unique tmp filename, max tries reached "+n));o(null,n)}))}()}function vn(e){var n=ln(e)[0],t=n.name?1:n.tries||3;if(isNaN(t)||t<0)throw new Error("Invalid tries");if(n.template&&!n.template.match(nn))throw new Error("Invalid template provided");do{const e=dn(n);try{Xe.statSync(e)}catch(n){return e}}while(t-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function hn(e){const n=[e];do{for(var t=n.pop(),r=!1,o=Xe.readdirSync(t),i=0,a=o.length;i<a;i++){var u=Ye.join(t,o[i]);Xe.lstatSync(u).isDirectory()?(r||(r=!0,n.push(t)),n.push(u)):Xe.unlinkSync(u)}r||Xe.rmdirSync(t)}while(0!==n.length)}function mn(e,n,t){const r=gn((function(e){try{0<=e[0]&&Xe.closeSync(e[0])}catch(e){if(!(n=e,bn(n,-rn,"EBADF")||wn(e)))throw e}var n;try{Xe.unlinkSync(e[1])}catch(e){if(!wn(e))throw e}}),[n,e]);return t.keep||an.unshift(r),r}function yn(e,n){const t=gn(n.unsafeCleanup?hn:Xe.rmdirSync.bind(Xe),e);return n.keep||an.unshift(t),t}function gn(e,n){var t=!1;return function r(o){if(!t){const o=an.indexOf(r);o>=0&&an.splice(o,1),t=!0,e(n)}o&&o(null)}}function _n(){if(!cn||un)for(;an.length;)try{an[0].call(null)}catch(e){}}function wn(e){return bn(e,-on,"ENOENT")}function bn(e,n,t){return e.code==n||e.code==t}const En=process.versions.node.split(".").map((function(e){return parseInt(e,10)}));0===En[0]&&(En[1]<9||9===En[1]&&En[2]<5)&&process.addListener("uncaughtException",(function(e){throw cn=!0,_n(),e})),process.addListener("exit",(function(e){e&&(cn=!0),_n()})),qe.tmpdir=Qe,qe.dir=function(e,n){var t=ln(e,n),r=t[0],o=t[1];pn(r,(function(e,n){if(e)return o(e);Xe.mkdir(n,r.mode||448,(function(e){if(e)return o(e);o(null,n,yn(n,r))}))}))},qe.dirSync=function(e){var n=ln(e)[0];const t=vn(n);return Xe.mkdirSync(t,n.mode||448),{name:t,removeCallback:yn(t,n)}},qe.file=function(e,n){var t=ln(e,n),r=t[0],o=t[1];r.postfix=fn(r.postfix)?".tmp":r.postfix,pn(r,(function(e,n){if(e)return o(e);Xe.open(n,tn,r.mode||384,(function(e,t){return e?o(e):r.discardDescriptor?Xe.close(t,(function(e){if(e){try{Xe.unlinkSync(n)}catch(n){wn(n)||(e=n)}return o(e)}o(null,n,void 0,mn(n,-1,r))})):r.detachDescriptor?o(null,n,t,mn(n,-1,r)):void o(null,n,t,mn(n,t,r))}))}))},qe.fileSync=function(e){var n=ln(e)[0];n.postfix=n.postfix||".tmp";const t=n.discardDescriptor||n.detachDescriptor,r=vn(n);var o=Xe.openSync(r,tn,n.mode||384);return n.discardDescriptor&&(Xe.closeSync(o),o=void 0),{name:r,fd:o,removeCallback:mn(r,t?-1:o,n)}},qe.tmpName=pn,qe.tmpNameSync=vn,qe.setGracefulCleanup=function(){un=!0},Object.defineProperty(We,"__esModule",{value:!0}),We.unlinkFile=We.writeFile=void 0;var xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};We.getWordRegexp=function(e,n){var t=e.scopeDescriptorForBufferPosition(n),r=(o=atom.config.get("editor.nonWordCharacters",{scope:t}),o.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var o;return new RegExp("^[\t ]*$|[^\\s"+r+"]+")},We.getTempDirectory=function(e){return new Promise((function(n,t){On.default.dir({prefix:e},(function(e,r,o){e?t(e):n({path:r,cleanup:o})}))}))},We.fileExists=function(e){return new Promise((function(n){Sn.default.access(e,Sn.default.R_OK,(function(e){n(null===e)}))}))},We.validateExec=function(e,n,t){if("string"!=typeof e)throw new Error("Invalid or no `command` provided");if(!(n instanceof Array))throw new Error("Invalid or no `args` provided");if("object"!==(void 0===t?"undefined":xn(t)))throw new Error("Invalid or no `options` provided")},We.validateEditor=function(e){var n=void 0;n="function"==typeof atom.workspace.isTextEditor?atom.workspace.isTextEditor(e):"function"==typeof e.getText;if(!n)throw new Error("Invalid TextEditor provided")},We.validateFind=function(e,n){if("string"!=typeof e)throw new Error("Invalid or no `directory` provided");if("string"!=typeof n&&!(n instanceof Array))throw new Error("Invalid or no `name` provided")},We.wrapExec=function(e){return function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=!1,i=e(n,t,Object.assign({timeout:1e4},r)),a=i;if(r.uniqueKey){if("string"!=typeof r.uniqueKey)throw new Error("options.uniqueKey must be a string");var u=An.get(r.uniqueKey);u&&u(),An.set(r.uniqueKey,(function(){o=!0,i.kill()})),a=a.then((function(e){return o?null:e}),(function(e){if(o)return null;throw e}))}return a.catch((function(e){if("ENOENT"===e.code){var n=new Error("Failed to spawn command `"+e.path+"`. Make sure `"+e.path+"` is installed and on your PATH");throw n.code="ENOENT",n}throw e}))}};var Sn=Pn(c.default),On=Pn(qe),jn=Pn(le);function Pn(e){return e&&e.__esModule?e:{default:e}}We.writeFile=(0,jn.default)(Sn.default.writeFile),We.unlinkFile=(0,jn.default)(Sn.default.unlink);var An=new Map;var Nn,Cn,Tn,Rn,Hn,Fn={exports:{}};Nn=Fn,function(e){var n,t=/^[$_a-z][$_a-z0-9]*$/i;function r(e){var n,r,o,i,a,u,c,s={},f=0,l="",d=!1;for(n=0;n<e.length;++n)if(r=e[n],i=(o=e[n+1])+e[n+2],l+=r,"\\"===r)if(d||"k<"!==i)l+=o,++n;else{if((a=e.indexOf(">",n+3))<0)throw new Error("'>' missing in named backreference.");if(!(c=s[u=e.substring(n+3,a)]))throw new Error("Named group '"+u+"' is not defined in backreference.");if("number"!=typeof c)throw new Error("Named backreference referencing duplicate named group '"+u+"'.");n=a,l+=c}else if(d)"]"===r&&(d=!1);else if("["===r)d=!0;else if("("===r&&"?:"!==i&&"?="!==i&&"?!"!==i&&(f++,"?<"===i||":<"===i)){if((a=e.indexOf(">",n+3))<0)throw new Error("'>' missing in named group.");if(u=e.substring(n+3,a),!t.test(u))throw new Error("Invalide group name '"+u+"'. Regexp group name should start with '_$a-zA-Z' and can contain only '_$a-zA-Z0-9'.");void 0===(c=s[u])?s[u]=f:"number"==typeof c?s[u]=[c,f]:c.push(f),n=a}return{mapper:s,regexText:l}}Nn.exports=function(e,t){if("boolean"!=typeof e){"string"!=typeof e&&(t=(e.global?"g":"")+(e.multiline?"m":"")+(e.ignoreCase?"i":""),e=e.source);var o=n?n[e]||(n[e]=r(e)):r(e),i=new RegExp(o.regexText,t);return i.groupsIndices=o.mapper,i.exec=function(e){var n=RegExp.prototype.exec.call(this,e);return n&&a(n),n},i.execGroups=function(e,n){var t=this.exec(e);return t?t.groups(n):null},i.replace=function(e,n){if("function"==typeof n)return e.replace(i,(function(){var e=Array.prototype.slice.call(arguments,0,arguments.length-2);return a(e),n.apply(e,arguments)}));var t=function(e,n){var t,r,o,i,a,u,c="";for(t=0;t<e.length;++t)if(r=e[t],o=e[t+1],c+=r,"$"===r)if("$"===o)c+=o,++t;else if("{"===o){if((a=e.indexOf("}",t+2))<0)throw new Error("'>' missing in replacement named group.");if(void 0===(u=n[i=e.substring(t+2,a)]))throw new Error("Named group '"+i+"' is not defined in replacement text.");if("number"!=typeof u)throw new Error("Named replacement referencing duplicate named group '"+i+"'.");c+=u,t=a}return c}(n,this.groupsIndices);return e.replace(this,t)},i}function a(e){var n,t,r=o.mapper;return e.group=function(n,t){var o=r[n];if("number"==typeof o)return e[o];if(t)return o.map((function(n){return e[n]}));if(o)for(var i=0;i<o.length;++i){var a=e[o[i]];if(void 0!==a)return a}},e.groups=function(o){var i=o?t:n;if(i)return i;for(var a in i={},r)i[a]=e.group(a,o);return o?t=i:n=i},e}!1===e?n=void 0:n||(n={})}}(),Object.defineProperty(d,"__esModule",{value:!0});var Ln=d.execNode=d.exec=d.tempFiles=d.findCachedAsync=d.findAsync=d.FindCache=void 0,kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In=Tn=d.findAsync=function(){var e=Zn((function*(e,n){Xn.validateFind(e,n);for(var t=[].concat(n),r=e.split(qn.sep);r.length;){var o=r.join(qn.sep);""===o&&(o=qn.resolve(e,"/"));var i=!0,a=!1,u=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=c.value,l=qn.join(o,f);if(yield Xn.fileExists(l))return l}}catch(e){a=!0,u=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw u}}r.pop()}return null}));return function(n,t){return e.apply(this,arguments)}}();Rn=d.findCachedAsync=function(){var e=Zn((function*(e,n){Xn.validateFind(e,n);var t=[].concat(n),r=e+":"+t.join(","),o=Jn.get(r);if(o){if(yield Xn.fileExists(o))return o;Jn.delete(r)}var i=yield In(e,t);return i&&Jn.set(r,i),i}));return function(n,t){return e.apply(this,arguments)}}();var Mn,$n=Hn=d.tempFiles=(Mn=Zn((function*(e,n){if(!Array.isArray(e))throw new Error("Invalid or no `files` provided");if("function"!=typeof n)throw new Error("Invalid or no `callback` provided");var t=yield Xn.getTempDirectory("atom-linter_"),r=[];yield Promise.all(e.map((function(e){var n=e.name,o=e.contents,i=qn.join(t.path,n);return r.push(i),Xn.writeFile(i,o)})));try{return yield n(r)}finally{yield Promise.all(r.map((function(e){return Xn.unlinkFile(e)}))),t.cleanup()}})),function(e,n){return Mn.apply(this,arguments)}),Kn=d.generateRange=function(e,n,t){Xn.validateEditor(e);var r=n;("number"!=typeof r||!Number.isFinite(r)||r<0)&&(r=0);var o=e.getBuffer(),i=o.getLineCount()-1;if(r>i)throw new Error("Line number ("+r+") greater than maximum line ("+i+")");var a="number"==typeof t&&Number.isFinite(t)&&t>-1,u=o.lineForRow(r),c=u.length,s=a?t:0;if(a){var f=Xn.getWordRegexp(e,[r,s]).exec(u.substr(t));f&&(c=s+f.index+f[0].length)}else{var l=u.match(/^\s+/);l&&(s=l[0].length)}if(s>u.length)throw new Error("Column start ("+(s||0)+") greater than line length ("+u.length+") for line "+r);return[[r,s],[r,c]]},Dn=d.find=Qn,zn=d.findCached=function(e,n){Xn.validateFind(e,n);var t=[].concat(n),r=e+":"+t.join(","),o=Jn.get(r);if(o)try{return Bn.accessSync(o,Bn.R_OK),o}catch(e){Jn.delete(r)}var i=Qn(e,t);i&&Jn.set(r,i);return i},Gn=d.tempFile=function(e,n,t){if("string"!=typeof e)throw new Error("Invalid or no `fileName` provided");if("string"!=typeof n)throw new Error("Invalid or no `fileContents` provided");if("function"!=typeof t)throw new Error("Invalid or no `callback` provided");return $n([{name:e,contents:n}],(function(e){return t(e[0])}))},Wn=d.parse=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof e)throw new Error("Invalid or no `data` provided");if("string"!=typeof n)throw new Error("Invalid or no `regex` provided");if("object"!==(void 0===t?"undefined":kn(t)))throw new Error("Invalid or no `options` provided");null===Vn&&(Vn=Fn.exports);var r={flags:""},o=Object.assign(r,t);-1===o.flags.indexOf("g")&&(o.flags+="g");var i=[],a=new Vn(n,o.flags),u=a.exec(e);for(;null!==u;){var c=u.groups(),s=c.type,f=c.message,l=c.file||o.filePath||null,d=c.lineStart||c.line||0,p=c.colStart||c.col||0,v=c.lineEnd||c.line||0,h=c.colEnd||c.col||0;i.push({type:s,text:f,filePath:l,range:[[d>0?d-1:0,p>0?p-1:0],[v>0?v-1:0,h>0?h-1:0]]}),u=a.exec(e)}return i},qn=Yn(u.default),Bn=Yn(c.default),Un=Ge,Xn=Yn(We);function Yn(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}function Zn(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function r(o,i){try{var a=n[o](i),u=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var Vn=null,Jn=Cn=d.FindCache=new Map;function Qn(e,n){Xn.validateFind(e,n);for(var t=[].concat(n),r=e.split(qn.sep);r.length;){var o=r.join(qn.sep);""===o&&(o=qn.resolve(e,"/"));var i=!0,a=!1,u=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=c.value,l=qn.join(o,f);try{return Bn.accessSync(l,Bn.R_OK),l}catch(e){}}}catch(e){a=!0,u=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw u}}r.pop()}return null}var et=Xn.wrapExec(Un.exec),nt=Xn.wrapExec(Un.execNode),tt=d.exec=et;Ln=d.execNode=nt;var rt=Object.freeze(Object.assign(Object.create(null),d,{get execNode(){return Ln},get exec(){return tt},get tempFiles(){return Hn},get findCachedAsync(){return Rn},get findAsync(){return Tn},get FindCache(){return Cn},generateRange:Kn,find:Dn,findCached:zn,tempFile:Gn,parse:Wn,default:d}));exports.index=rt;
//# sourceMappingURL=index-f1c331ce.js.map
