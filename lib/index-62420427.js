"use strict";var e=require("path"),n=require("fs"),t=require("child_process"),r=require("assert"),o=require("./_commonjsHelpers-68cdf74f.js"),i=require("crypto");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function u(e,n){return n.forEach((function(n){n&&"string"!=typeof n&&!Array.isArray(n)&&Object.keys(n).forEach((function(t){if("default"!==t&&!(t in e)){var r=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:function(){return n[t]}})}}))})),Object.freeze(e)}var c=a(e),s=a(n),f=a(t),l=a(r),d=a(i),p={},v={},h="[object GeneratorFunction]",m=/^\[object .+?Constructor\]$/,y="object"==typeof o.commonjsGlobal&&o.commonjsGlobal&&o.commonjsGlobal.Object===Object&&o.commonjsGlobal,g="object"==typeof self&&self&&self.Object===Object&&self,_=y||g||Function("return this")();function w(e,n){return!!(e?e.length:0)&&function(e,n,t){if(n!=n)return function(e,n,t,r){var o=e.length,i=t+(r?1:-1);for(;r?i--:++i<o;)if(n(e[i],i,e))return i;return-1}(e,E,t);var r=t-1,o=e.length;for(;++r<o;)if(e[r]===n)return r;return-1}(e,n,0)>-1}function b(e,n,t){for(var r=-1,o=e?e.length:0;++r<o;)if(t(n,e[r]))return!0;return!1}function E(e){return e!=e}function x(e,n){return e.has(n)}function S(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=e})),t}var O,j=Array.prototype,P=Function.prototype,A=Object.prototype,N=_["__core-js_shared__"],C=(O=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"",T=P.toString,R=A.hasOwnProperty,H=A.toString,F=RegExp("^"+T.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=j.splice,L=U(_,"Map"),I=U(_,"Set"),M=U(Object,"create");function $(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function D(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function K(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function z(e){var n=-1,t=e?e.length:0;for(this.__data__=new K;++n<t;)this.add(e[n])}function G(e,n){for(var t,r,o=e.length;o--;)if((t=e[o][0])===(r=n)||t!=t&&r!=r)return o;return-1}function W(e){return!(!X(e)||(n=e,C&&C in n))&&(function(e){var n=X(e)?H.call(e):"";return"[object Function]"==n||n==h}(e)||function(e){var n=!1;if(null!=e&&"function"!=typeof e.toString)try{n=!!(e+"")}catch(e){}return n}(e)?F:m).test(function(e){if(null!=e){try{return T.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var n}$.prototype.clear=function(){this.__data__=M?M(null):{}},$.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},$.prototype.get=function(e){var n=this.__data__;if(M){var t=n[e];return"__lodash_hash_undefined__"===t?void 0:t}return R.call(n,e)?n[e]:void 0},$.prototype.has=function(e){var n=this.__data__;return M?void 0!==n[e]:R.call(n,e)},$.prototype.set=function(e,n){return this.__data__[e]=M&&void 0===n?"__lodash_hash_undefined__":n,this},D.prototype.clear=function(){this.__data__=[]},D.prototype.delete=function(e){var n=this.__data__,t=G(n,e);return!(t<0)&&(t==n.length-1?n.pop():k.call(n,t,1),!0)},D.prototype.get=function(e){var n=this.__data__,t=G(n,e);return t<0?void 0:n[t][1]},D.prototype.has=function(e){return G(this.__data__,e)>-1},D.prototype.set=function(e,n){var t=this.__data__,r=G(t,e);return r<0?t.push([e,n]):t[r][1]=n,this},K.prototype.clear=function(){this.__data__={hash:new $,map:new(L||D),string:new $}},K.prototype.delete=function(e){return B(this,e).delete(e)},K.prototype.get=function(e){return B(this,e).get(e)},K.prototype.has=function(e){return B(this,e).has(e)},K.prototype.set=function(e,n){return B(this,e).set(e,n),this},z.prototype.add=z.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},z.prototype.has=function(e){return this.__data__.has(e)};var q=I&&1/S(new I([,-0]))[1]==1/0?function(e){return new I(e)}:function(){};function B(e,n){var t,r,o=e.__data__;return("string"==(r=typeof(t=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?o["string"==typeof n?"string":"hash"]:o.map}function U(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return W(t)?t:void 0}function X(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}var Y=function(e){return e&&e.length?function(e,n,t){var r=-1,o=w,i=e.length,a=!0,u=[],c=u;if(t)a=!1,o=b;else if(i>=200){var s=n?null:q(e);if(s)return S(s);a=!1,o=x,c=new z}else c=n?[]:u;e:for(;++r<i;){var f=e[r],l=n?n(f):f;if(f=t||0!==f?f:0,a&&l==l){for(var d=c.length;d--;)if(c[d]===l)continue e;n&&c.push(l),u.push(f)}else o(c,l,t)||(c!==u&&c.push(l),u.push(f))}return u}(e):[]},Z={exports:{}},V={};Object.defineProperty(V,"__esModule",{value:!0}),V.assign=V.CACHE_KEY=V.KNOWN_SHELLS=void 0,V.identifyEnvironment=function(){var e=re(),n=e.command,t=e.parameters,r=e.options;return r.timeout=4e3,(0,ee.spawnSync)(n,t,r).stdout.toString().split("\0")},V.identifyEnvironmentAsync=function(){return new Promise((function(e,n){var t=re(),r=t.command,o=t.parameters,i=t.options,a=(0,ee.spawn)(r,o,i),u=[],c=setTimeout((function(){a.kill(),n(new Error("Process execution timed out"))}),4e3);a.stdout.on("data",(function(e){u.push(e)})),a.on("close",(function(){clearTimeout(c),e(u.join("").split("\0"))})),a.on("error",(function(e){n(e)}))}))},V.parse=function(e){var n={},t=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var u=i.value,c=u.indexOf("=");if(-1!==c){var s=u.slice(0,c),f=u.slice(c+1);n[s]=f}}}catch(e){r=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw o}}return n},V.applySugar=function(e){var n=process.env.PATH?process.env.PATH.split(":"):[];if(e.PATH){var t=!0,r=!1,o=void 0;try{for(var i,a=e.PATH.split(":")[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var u=i.value;u&&-1===n.indexOf(u)&&n.push(u)}}catch(e){r=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw o}}}var c=!0,s=!1,f=void 0;try{for(var l,d=te[Symbol.iterator]();!(c=(l=d.next()).done);c=!0){var p=l.value;-1===n.indexOf(p)&&(n=[p].concat(n))}}catch(e){s=!0,f=e}finally{try{!c&&d.return&&d.return()}finally{if(s)throw f}}e.USER||(process.env.USER?e.USER=process.env.USER:e.HOME&&(e.USER=J.default.basename(e.HOME)));return e.PATH=(0,Q.default)(n).join(":"),e.PWD=process.cwd(),e.OLDPWD=e.PWD,e},V.getCommand=re;var J=ne(c.default),Q=ne(Y),ee=f.default;function ne(e){return e&&e.__esModule?e:{default:e}}var te=["/bin","/sbin","/usr/bin","/usr/sbin","/usr/local/bin","/usr/local/sbin"];function re(){var e='import os;print(\\"\\0\\".join(map(\\"=\\".join, dict(os.environ).items()))+\\"\\0\\")',n='python -c "'+e+'"||python3 -c "'+e+'"||env|sed -n -e "s/^\\([A-Za-z_][A-Za-z0-9_]*\\)=.*/\\1/p"|while read name;do [ "$name" != "_" -a -n "$(eval "printf \\"%s\\" \\"\\${$name+x}\\"")" ]&&value="$(eval "printf \\"%s\\" \\"\\${$name}\\"")"&&printf "%s=%s\\0" "$name" "$value";done;exit;',t="sh -c '"+n+"';exit;",r=process.env.SHELL||"sh",o=["-c",t],i=J.default.basename(r);return"bash"===i?o=["-c","source ~/.bashrc;source ~/.bash_profile;"+n]:"zsh"===i?o=["-c","source ~/.zshrc;"+n]:"fish"===i?o=["-c","source ~/.config/fish/config.fish;"+t]:"sh"!==i&&"ksh"!==i||(o=["-c",n]),{command:r,parameters:o,options:{encoding:"utf8"}}}V.KNOWN_SHELLS=["zsh","bash","fish"],V.CACHE_KEY="__STEELBRAIN_CONSISTENT_ENV_V1",V.assign=Object.assign||function(e,n){for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e};var oe,ie=c.default,ae=(oe=ie)&&oe.__esModule?oe:{default:oe},ue=V;Z.exports=function(){if("win32"===process.platform||!process.env.SHELL)return(0,ue.assign)({},process.env);if(o.commonjsGlobal[ue.CACHE_KEY])return(0,ue.assign)({},o.commonjsGlobal[ue.CACHE_KEY]);var e=ae.default.basename(process.env.SHELL);if(-1===ue.KNOWN_SHELLS.indexOf(e))return(0,ue.assign)({},process.env);try{var n=(0,ue.applySugar)((0,ue.parse)((0,ue.identifyEnvironment)()));return o.commonjsGlobal[ue.CACHE_KEY]=n,n}catch(e){return console.error("[consistent-env] Unable to determine environment",e),(0,ue.assign)({},process.env)}},Z.exports.async=function(){return new Promise((function(e){if("win32"!==process.platform&&process.env.SHELL)if(o.commonjsGlobal[ue.CACHE_KEY])e((0,ue.assign)({},o.commonjsGlobal[ue.CACHE_KEY]));else{var n=ae.default.basename(process.env.SHELL);-1===ue.KNOWN_SHELLS.indexOf(n)?e((0,ue.assign)({},process.env)):e((0,ue.identifyEnvironmentAsync)().then(ue.parse).then(ue.applySugar).then((function(e){return o.commonjsGlobal[ue.CACHE_KEY]=e,e})))}else e((0,ue.assign)({},process.env))})).catch((function(e){return console.error("[consistent-env] Unable to determine environment",e),(0,ue.assign)({},process.env)}))};var ce={},se={},fe=Symbol("cache deleted");var le=function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];function t(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=JSON.stringify(o),u=o.length;if(a in t.__sb_cache&&t.__sb_cache[a]!==fe){var c=t.__sb_cache[a];return!n.async||c&&"Promise"===c.constructor.name?c:Promise.resolve(c)}var s=void 0;if(s=1===u?e.call(this,o[0]):2===u?e.call(this,o[0],o[1]):3===u?e.call(this,o[0],o[1],o[2]):4===u?e.call(this,o[0],o[1],o[2],o[3]):e.apply(this,o),t.__sb_cache[a]=s,n.async){if(!s||"Promise"!==s.constructor.name)throw new Error("Memoization Error, Async function returned non-promise value");return s.then((function(e){return t.__sb_cache[a]=e,e}),(function(e){throw t.__sb_cache[a]=fe,e}))}return s}return t.__sb_cache={},t},de={};function pe(e){var n=arguments.length<=1||void 0===arguments[1]||arguments[1];return function(){for(var t=this,r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=new Promise((function(n,r){o.push((function(e,t){e?r(e):n(t)})),e.apply(t,o)}));return n||(a=a.then((function(e){return void 0===e||e})).catch((function(){return!1}))),a}}Object.defineProperty(de,"__esModule",{value:!0}),de.default=pe,de.promisify=pe,de.promisifyAll=function(e){var n=arguments.length<=1||void 0===arguments[1]||arguments[1],t=Object.assign({},e);for(var r in t)({}).hasOwnProperty.call(t,r)&&"function"==typeof t[r]&&(t[r+"Async"]=pe(t[r],n));return t},Object.defineProperty(se,"__esModule",{value:!0}),se.findAsync=se.find=void 0;var ve,he,me=(ve=function*(e,n){for(var t=[].concat(n),r=e.split(ye.default.sep);r.length;){var o=r.join(ye.default.sep);""===o&&(o=ye.default.resolve(e,"/"));for(var i=0,a=t.length;i<a;++i){var u=t[i],c=ye.default.join(o,u);try{return yield be(c,ge.default.R_OK),c}catch(e){}}r.pop()}return null},he=function(){var e=ve.apply(this,arguments);return new Promise((function(n,t){function r(o,i){try{var a=e[o](i),u=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(u).then((function(e){return r("next",e)}),(function(e){return r("throw",e)}));n(u)}return r("next")}))},function(e,n){return he.apply(this,arguments)}),ye=we(c.default),ge=we(s.default),_e=we(le);function we(e){return e&&e.__esModule?e:{default:e}}var be=(0,we(de).default)(ge.default.access);se.find=(0,_e.default)((function(e,n){for(var t=[].concat(n),r=e.split(ye.default.sep);r.length;){var o=r.join(ye.default.sep);""===o&&(o=ye.default.resolve(e,"/"));for(var i=0,a=t.length;i<a;++i){var u=t[i],c=ye.default.join(o,u);try{return ge.default.accessSync(c,ge.default.R_OK),c}catch(e){}}r.pop()}return null})),se.findAsync=(0,_e.default)(me,{async:!0}),Object.defineProperty(ce,"__esModule",{value:!0}),ce.clearCache=ce.getPathAsync=ce.getPath=void 0;var Ee=function(){var e=function(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){function r(o,i){try{var a=n[o](i),u=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(u).then((function(e){return r("next",e)}),(function(e){return r("throw",e)}));e(u)}return r("next")}))}}((function*(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],n=e;return n||(n=process.cwd()),(yield(0,Se.findAsync)(n,xe.default.join("node_modules",".bin")))||""}));return function(n){return e.apply(this,arguments)}}(),xe=function(e){return e&&e.__esModule?e:{default:e}}(c.default),Se=se;function Oe(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],n=e;return n||(n=process.cwd()),(0,Se.find)(n,xe.default.join("node_modules",".bin"))||""}ce.default=Oe,ce.getPath=Oe,ce.getPathAsync=Ee,ce.clearCache=function(){Se.find.__sb_cache={},Se.findAsync.__sb_cache={}},Object.defineProperty(v,"__esModule",{value:!0}),v.getSpawnOptions=void 0;var je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};v.getSpawnOptions=function(){var e=function(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){function r(o,i){try{var a=n[o](i),u=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}return r("next")}))}}((function*(e){var n=Object.assign({},e,{env:ke(yield(0,Ce.async)(),e.env)}),t=void 0,r=e.local;if(r&&(t=yield(0,Te.getPathAsync)(r.directory)),r&&t)for(var o in n.env)if({}.hasOwnProperty.call(n.env,o)&&"PATH"===o){var i=n.env[o];n.env[o]=r.prepend?t+He+i:i+He+t;break}return delete n.timeout,n.env.OS&&(n.env.OS=void 0),process.versions.electron&&(n.env.ELECTRON_RUN_AS_NODE="1",n.env.ATOM_SHELL_INTERNAL_RUN_AS_NODE="1",n.env.ELECTRON_NO_ATTACH_CONSOLE="1"),n}));return function(n){return e.apply(this,arguments)}}(),v.validate=function(e,n,t){var r=Object.assign({},t);if((0,Ae.default)("string"==typeof e&&e,"filePath must be a string"),(0,Ae.default)(Array.isArray(n),"parameters must be an array"),(0,Ae.default)("object"===(void 0===r?"undefined":je(r))&&r,"options must be an object"),r.stream){var o=r.stream;(0,Ae.default)("both"===o||"stdout"===o||"stderr"===o,"options.stream should be stdout|stderr|both")}else r.stream="stdout";r.timeout?(0,Ae.default)("number"==typeof r.timeout,"options.timeout must be a number"):r.timeout=1/0;r.env?(0,Ae.default)("object"===je(r.env),"options.env must be an object"):r.env={};r.stdin?(0,Ae.default)("string"==typeof r.stdin||Buffer.isBuffer(r.stdin),"options.stdin must be a string or a Buffer"):r.stdin=null;void 0!==r.throwOnStderr?(0,Ae.default)("boolean"==typeof r.throwOnStderr,"options.throwOnStderr must be a boolean"):r.throwOnStderr=!0;void 0!==r.local&&((0,Ae.default)("object"===je(r.local),"options.local must be an object"),(0,Ae.default)("string"==typeof r.local.directory,"options.local.directory must be a string"),void 0!==r.local.prepend?(0,Ae.default)("boolean"==typeof r.local.prepend,"options.local.prepend must be a boolean"):r.local.prepend=!1);void 0!==r.allowEmptyStderr?(0,Ae.default)("boolean"==typeof r.allowEmptyStderr,"options.throwWhenEmptyStderr must be a boolean"):r.allowEmptyStderr=!1;void 0!==r.ignoreExitCode?(0,Ae.default)("boolean"==typeof r.ignoreExitCode,"options.ignoreExitCode must be a boolean"):r.ignoreExitCode=!1;return r},v.mergePath=Fe,v.mergeEnv=ke,v.escape=function(e){return'"'+String(e).replace(/"/g,'\\"')+'"'},v.shouldNormalizeForWindows=function(e,n){var t=Pe.default.basename(e);return"win32"===process.platform&&!n.shell&&"cmd.exe"!==t&&"cmd"!==t},v.getENOENTError=function(e,n){var t=new Error("spawn "+e+" ENOENT");return t.code="ENOENT",t.errno="ENOENT",t.syscall="spawn "+e,t.path=e,t.spawnargs=n,t};var Pe=Re(c.default),Ae=Re(l.default),Ne=Re(Y),Ce=Z.exports,Te=ce;function Re(e){return e&&e.__esModule?e:{default:e}}var He="win32"===process.platform?";":":";function Fe(e,n){return(0,Ne.default)(e.split(";").concat(n.split(";")).map((function(e){return e.trim()})).filter((function(e){return e}))).join(";")}function ke(e,n){if("win32"!==process.platform)return Object.assign(e,n);var t={PATH:""};for(var r in e)"PATH"===r.toUpperCase()?t.PATH=Fe(t.PATH,e[r]):t[r]=e[r];for(var o in n)"PATH"===o.toUpperCase()?t.PATH=Fe(t.PATH,n[o]):t[o]=n[o];return t}var Le,Ie=function(){var e=ze((function*(e,n,t,r){var o=yield(0,Ke.getSpawnOptions)(t),i=e,a=n,u=!1;if((0,Ke.shouldNormalizeForWindows)(i,t)){o.windowsVerbatimArguments=!0;var c=[i];/\s/.test(i)&&(c=c.map(Ke.escape)),c=c.concat(a.map(Ke.escape)),i=process.env.comspec||"cmd.exe",a=["/s","/c",'"'+c.join(" ")+'"'],u=!0}return new Promise((function(c,s){var f=(0,De.spawn)(i,a,o),l={stdout:[],stderr:[]},d=void 0;if(f.stdout&&f.stdout.on("data",(function(e){l.stdout.push(e)})),f.stderr&&f.stderr.on("data",(function(e){l.stderr.push(e)})),f.on("error",(function(e){s(e)})),f.on("close",(function(r){clearTimeout(d);var o=l.stdout.join("").trim(),i=l.stderr.join("").trim();u&&i==="'"+e+"' is not recognized as an internal or external command,\r\noperable program or batch file."?s((0,Ke.getENOENTError)(e,n)):"stdout"===t.stream?i&&t.throwOnStderr?s(new Error(i)):0===r||t.ignoreExitCode?c(o):(console.error("[exec] Process exited with no-zero code, stdout: ",o),s(new Error("Process exited with non-zero code: "+r))):"stderr"===t.stream?0!==i.length||t.allowEmptyStderr?c(i):s(new Error("Process exited with no output, code: "+r)):c({stdout:o,stderr:i,exitCode:r})})),f.stdin){if(t.stdin)try{f.stdin.write(t.stdin)}catch(e){}try{f.stdin.end()}catch(e){}}t.timeout!==1/0&&(d=setTimeout((function(){Me(f),s(new Error("Process execution timed out"))}),t.timeout)),r(f)}))}));return function(n,t,r,o){return e.apply(this,arguments)}}(),Me=(Le=ze((function*(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SIGTERM",t=$e.default.basename(e.spawnfile);if("win32"===process.platform&&"wmic.exe"!==t&&"wmic"!==t)try{var r=yield Ge("wmic",["process","where","(ParentProcessId="+e.pid+")","get","processid"],{stream:"stdout",timeout:6e4});r.split(/\s+/).filter((function(e){return/^\d+$/.test(e)})).map((function(e){return parseInt(e,10)})).filter((function(n){return n!==e.pid&&n>0})).forEach((function(e){process.kill(e,n)}))}catch(e){}else e.kill(n)})),function(e){return Le.apply(this,arguments)}),$e=function(e){return e&&e.__esModule?e:{default:e}}(c.default),De=f.default,Ke=v;function ze(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function r(o,i){try{var a=n[o](i),u=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}function Ge(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,Ke.validate)(e,n,t),o=null,i=null,a=Ie(e,n,r,(function(e){o?Me(e,o):i=e}));return a.kill=function(e){i?Me(i,e):o=e||"SIGTERM"},a}var We={exec:Ge,execNode:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,Ke.validate)(e,n,t),Ge(process.execPath,[e].concat(n),t)}},qe={},Be={},Ue="win32"===process.platform,Xe=Ue?/[^:]\\$/:/.\/$/;
/*!
 * Tmp
 *
 * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */
const Ye=s.default,Ze=c.default,Ve=d.default,Je=function(){var e;return e=Ue?process.env.TEMP||process.env.TMP||(process.env.SystemRoot||process.env.windir)+"\\temp":process.env.TMPDIR||process.env.TMP||process.env.TEMP||"/tmp",Xe.test(e)&&(e=e.slice(0,-1)),e},Qe=process.binding("constants"),en=Je(),nn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",tn=/XXXXXX/,rn=(Qe.O_CREAT||Qe.fs.O_CREAT)|(Qe.O_EXCL||Qe.fs.O_EXCL)|(Qe.O_RDWR||Qe.fs.O_RDWR),on=Qe.EBADF||Qe.os.errno.EBADF,an=Qe.ENOENT||Qe.os.errno.ENOENT,un=[];var cn=!1,sn=!1;function fn(e){var n=[],t=null;try{t=Ve.randomBytes(e)}catch(n){t=Ve.pseudoRandomBytes(e)}for(var r=0;r<e;r++)n.push(nn[t[r]%nn.length]);return n.join("")}function ln(e){return void 0===e}function dn(e,n){return"function"==typeof e?[n||{},e]:ln(e)?[{},n]:[e,n]}function pn(e){if(e.name)return Ze.join(e.dir||en,e.name);if(e.template)return e.template.replace(tn,fn(6));const n=[e.prefix||"tmp-",process.pid,fn(12),e.postfix||""].join("");return Ze.join(e.dir||en,n)}function vn(e,n){var t=dn(e,n),r=t[0],o=t[1],i=r.name?1:r.tries||3;return isNaN(i)||i<0?o(new Error("Invalid tries")):r.template&&!r.template.match(tn)?o(new Error("Invalid template provided")):void function e(){const n=pn(r);Ye.stat(n,(function(t){if(!t)return i-- >0?e():o(new Error("Could not get a unique tmp filename, max tries reached "+n));o(null,n)}))}()}function hn(e){var n=dn(e)[0],t=n.name?1:n.tries||3;if(isNaN(t)||t<0)throw new Error("Invalid tries");if(n.template&&!n.template.match(tn))throw new Error("Invalid template provided");do{const e=pn(n);try{Ye.statSync(e)}catch(n){return e}}while(t-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function mn(e){const n=[e];do{for(var t=n.pop(),r=!1,o=Ye.readdirSync(t),i=0,a=o.length;i<a;i++){var u=Ze.join(t,o[i]);Ye.lstatSync(u).isDirectory()?(r||(r=!0,n.push(t)),n.push(u)):Ye.unlinkSync(u)}r||Ye.rmdirSync(t)}while(0!==n.length)}function yn(e,n,t){const r=_n((function(e){try{0<=e[0]&&Ye.closeSync(e[0])}catch(e){if(!(n=e,En(n,-on,"EBADF")||bn(e)))throw e}var n;try{Ye.unlinkSync(e[1])}catch(e){if(!bn(e))throw e}}),[n,e]);return t.keep||un.unshift(r),r}function gn(e,n){const t=_n(n.unsafeCleanup?mn:Ye.rmdirSync.bind(Ye),e);return n.keep||un.unshift(t),t}function _n(e,n){var t=!1;return function r(o){if(!t){const o=un.indexOf(r);o>=0&&un.splice(o,1),t=!0,e(n)}o&&o(null)}}function wn(){if(!sn||cn)for(;un.length;)try{un[0].call(null)}catch(e){}}function bn(e){return En(e,-an,"ENOENT")}function En(e,n,t){return e.code==n||e.code==t}const xn=process.versions.node.split(".").map((function(e){return parseInt(e,10)}));0===xn[0]&&(xn[1]<9||9===xn[1]&&xn[2]<5)&&process.addListener("uncaughtException",(function(e){throw sn=!0,wn(),e})),process.addListener("exit",(function(e){e&&(sn=!0),wn()})),Be.tmpdir=en,Be.dir=function(e,n){var t=dn(e,n),r=t[0],o=t[1];vn(r,(function(e,n){if(e)return o(e);Ye.mkdir(n,r.mode||448,(function(e){if(e)return o(e);o(null,n,gn(n,r))}))}))},Be.dirSync=function(e){var n=dn(e)[0];const t=hn(n);return Ye.mkdirSync(t,n.mode||448),{name:t,removeCallback:gn(t,n)}},Be.file=function(e,n){var t=dn(e,n),r=t[0],o=t[1];r.postfix=ln(r.postfix)?".tmp":r.postfix,vn(r,(function(e,n){if(e)return o(e);Ye.open(n,rn,r.mode||384,(function(e,t){return e?o(e):r.discardDescriptor?Ye.close(t,(function(e){if(e){try{Ye.unlinkSync(n)}catch(n){bn(n)||(e=n)}return o(e)}o(null,n,void 0,yn(n,-1,r))})):r.detachDescriptor?o(null,n,t,yn(n,-1,r)):void o(null,n,t,yn(n,t,r))}))}))},Be.fileSync=function(e){var n=dn(e)[0];n.postfix=n.postfix||".tmp";const t=n.discardDescriptor||n.detachDescriptor,r=hn(n);var o=Ye.openSync(r,rn,n.mode||384);return n.discardDescriptor&&(Ye.closeSync(o),o=void 0),{name:r,fd:o,removeCallback:yn(r,t?-1:o,n)}},Be.tmpName=vn,Be.tmpNameSync=hn,Be.setGracefulCleanup=function(){cn=!0},Object.defineProperty(qe,"__esModule",{value:!0}),qe.unlinkFile=qe.writeFile=void 0;var Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};qe.getWordRegexp=function(e,n){var t=e.scopeDescriptorForBufferPosition(n),r=(o=atom.config.get("editor.nonWordCharacters",{scope:t}),o.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var o;return new RegExp("^[\t ]*$|[^\\s"+r+"]+")},qe.getTempDirectory=function(e){return new Promise((function(n,t){jn.default.dir({prefix:e},(function(e,r,o){e?t(e):n({path:r,cleanup:o})}))}))},qe.fileExists=function(e){return new Promise((function(n){On.default.access(e,On.default.R_OK,(function(e){n(null===e)}))}))},qe.validateExec=function(e,n,t){if("string"!=typeof e)throw new Error("Invalid or no `command` provided");if(!(n instanceof Array))throw new Error("Invalid or no `args` provided");if("object"!==(void 0===t?"undefined":Sn(t)))throw new Error("Invalid or no `options` provided")},qe.validateEditor=function(e){var n=void 0;n="function"==typeof atom.workspace.isTextEditor?atom.workspace.isTextEditor(e):"function"==typeof e.getText;if(!n)throw new Error("Invalid TextEditor provided")},qe.validateFind=function(e,n){if("string"!=typeof e)throw new Error("Invalid or no `directory` provided");if("string"!=typeof n&&!(n instanceof Array))throw new Error("Invalid or no `name` provided")},qe.wrapExec=function(e){return function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=!1,i=e(n,t,Object.assign({timeout:1e4},r)),a=i;if(r.uniqueKey){if("string"!=typeof r.uniqueKey)throw new Error("options.uniqueKey must be a string");var u=Nn.get(r.uniqueKey);u&&u(),Nn.set(r.uniqueKey,(function(){o=!0,i.kill()})),a=a.then((function(e){return o?null:e}),(function(e){if(o)return null;throw e}))}return a.catch((function(e){if("ENOENT"===e.code){var n=new Error("Failed to spawn command `"+e.path+"`. Make sure `"+e.path+"` is installed and on your PATH");throw n.code="ENOENT",n}throw e}))}};var On=An(s.default),jn=An(Be),Pn=An(de);function An(e){return e&&e.__esModule?e:{default:e}}qe.writeFile=(0,Pn.default)(On.default.writeFile),qe.unlinkFile=(0,Pn.default)(On.default.unlink);var Nn=new Map;var Cn,Tn,Rn,Hn,Fn,kn={exports:{}};Cn=kn,function(e){var n,t=/^[$_a-z][$_a-z0-9]*$/i;function r(e){var n,r,o,i,a,u,c,s={},f=0,l="",d=!1;for(n=0;n<e.length;++n)if(r=e[n],i=(o=e[n+1])+e[n+2],l+=r,"\\"===r)if(d||"k<"!==i)l+=o,++n;else{if((a=e.indexOf(">",n+3))<0)throw new Error("'>' missing in named backreference.");if(!(c=s[u=e.substring(n+3,a)]))throw new Error("Named group '"+u+"' is not defined in backreference.");if("number"!=typeof c)throw new Error("Named backreference referencing duplicate named group '"+u+"'.");n=a,l+=c}else if(d)"]"===r&&(d=!1);else if("["===r)d=!0;else if("("===r&&"?:"!==i&&"?="!==i&&"?!"!==i&&(f++,"?<"===i||":<"===i)){if((a=e.indexOf(">",n+3))<0)throw new Error("'>' missing in named group.");if(u=e.substring(n+3,a),!t.test(u))throw new Error("Invalide group name '"+u+"'. Regexp group name should start with '_$a-zA-Z' and can contain only '_$a-zA-Z0-9'.");void 0===(c=s[u])?s[u]=f:"number"==typeof c?s[u]=[c,f]:c.push(f),n=a}return{mapper:s,regexText:l}}Cn.exports=function(e,t){if("boolean"!=typeof e){"string"!=typeof e&&(t=(e.global?"g":"")+(e.multiline?"m":"")+(e.ignoreCase?"i":""),e=e.source);var o=n?n[e]||(n[e]=r(e)):r(e),i=new RegExp(o.regexText,t);return i.groupsIndices=o.mapper,i.exec=function(e){var n=RegExp.prototype.exec.call(this,e);return n&&a(n),n},i.execGroups=function(e,n){var t=this.exec(e);return t?t.groups(n):null},i.replace=function(e,n){if("function"==typeof n)return e.replace(i,(function(){var e=Array.prototype.slice.call(arguments,0,arguments.length-2);return a(e),n.apply(e,arguments)}));var t=function(e,n){var t,r,o,i,a,u,c="";for(t=0;t<e.length;++t)if(r=e[t],o=e[t+1],c+=r,"$"===r)if("$"===o)c+=o,++t;else if("{"===o){if((a=e.indexOf("}",t+2))<0)throw new Error("'>' missing in replacement named group.");if(void 0===(u=n[i=e.substring(t+2,a)]))throw new Error("Named group '"+i+"' is not defined in replacement text.");if("number"!=typeof u)throw new Error("Named replacement referencing duplicate named group '"+i+"'.");c+=u,t=a}return c}(n,this.groupsIndices);return e.replace(this,t)},i}function a(e){var n,t,r=o.mapper;return e.group=function(n,t){var o=r[n];if("number"==typeof o)return e[o];if(t)return o.map((function(n){return e[n]}));if(o)for(var i=0;i<o.length;++i){var a=e[o[i]];if(void 0!==a)return a}},e.groups=function(o){var i=o?t:n;if(i)return i;for(var a in i={},r)i[a]=e.group(a,o);return o?t=i:n=i},e}!1===e?n=void 0:n||(n={})}}(),Object.defineProperty(p,"__esModule",{value:!0});var Ln=p.execNode=p.exec=p.tempFiles=p.findCachedAsync=p.findAsync=p.FindCache=void 0,In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn=Rn=p.findAsync=function(){var e=Vn((function*(e,n){Yn.validateFind(e,n);for(var t=[].concat(n),r=e.split(Bn.sep);r.length;){var o=r.join(Bn.sep);""===o&&(o=Bn.resolve(e,"/"));var i=!0,a=!1,u=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=c.value,l=Bn.join(o,f);if(yield Yn.fileExists(l))return l}}catch(e){a=!0,u=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw u}}r.pop()}return null}));return function(n,t){return e.apply(this,arguments)}}();Hn=p.findCachedAsync=function(){var e=Vn((function*(e,n){Yn.validateFind(e,n);var t=[].concat(n),r=e+":"+t.join(","),o=Qn.get(r);if(o){if(yield Yn.fileExists(o))return o;Qn.delete(r)}var i=yield Mn(e,t);return i&&Qn.set(r,i),i}));return function(n,t){return e.apply(this,arguments)}}();var $n,Dn=Fn=p.tempFiles=($n=Vn((function*(e,n){if(!Array.isArray(e))throw new Error("Invalid or no `files` provided");if("function"!=typeof n)throw new Error("Invalid or no `callback` provided");var t=yield Yn.getTempDirectory("atom-linter_"),r=[];yield Promise.all(e.map((function(e){var n=e.name,o=e.contents,i=Bn.join(t.path,n);return r.push(i),Yn.writeFile(i,o)})));try{return yield n(r)}finally{yield Promise.all(r.map((function(e){return Yn.unlinkFile(e)}))),t.cleanup()}})),function(e,n){return $n.apply(this,arguments)}),Kn=p.generateRange=function(e,n,t){Yn.validateEditor(e);var r=n;("number"!=typeof r||!Number.isFinite(r)||r<0)&&(r=0);var o=e.getBuffer(),i=o.getLineCount()-1;if(r>i)throw new Error("Line number ("+r+") greater than maximum line ("+i+")");var a="number"==typeof t&&Number.isFinite(t)&&t>-1,u=o.lineForRow(r),c=u.length,s=a?t:0;if(a){var f=Yn.getWordRegexp(e,[r,s]).exec(u.substr(t));f&&(c=s+f.index+f[0].length)}else{var l=u.match(/^\s+/);l&&(s=l[0].length)}if(s>u.length)throw new Error("Column start ("+(s||0)+") greater than line length ("+u.length+") for line "+r);return[[r,s],[r,c]]},zn=p.find=et,Gn=p.findCached=function(e,n){Yn.validateFind(e,n);var t=[].concat(n),r=e+":"+t.join(","),o=Qn.get(r);if(o)try{return Un.accessSync(o,Un.R_OK),o}catch(e){Qn.delete(r)}var i=et(e,t);i&&Qn.set(r,i);return i},Wn=p.tempFile=function(e,n,t){if("string"!=typeof e)throw new Error("Invalid or no `fileName` provided");if("string"!=typeof n)throw new Error("Invalid or no `fileContents` provided");if("function"!=typeof t)throw new Error("Invalid or no `callback` provided");return Dn([{name:e,contents:n}],(function(e){return t(e[0])}))},qn=p.parse=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof e)throw new Error("Invalid or no `data` provided");if("string"!=typeof n)throw new Error("Invalid or no `regex` provided");if("object"!==(void 0===t?"undefined":In(t)))throw new Error("Invalid or no `options` provided");null===Jn&&(Jn=kn.exports);var r={flags:""},o=Object.assign(r,t);-1===o.flags.indexOf("g")&&(o.flags+="g");var i=[],a=new Jn(n,o.flags),u=a.exec(e);for(;null!==u;){var c=u.groups(),s=c.type,f=c.message,l=c.file||o.filePath||null,d=c.lineStart||c.line||0,p=c.colStart||c.col||0,v=c.lineEnd||c.line||0,h=c.colEnd||c.col||0;i.push({type:s,text:f,filePath:l,range:[[d>0?d-1:0,p>0?p-1:0],[v>0?v-1:0,h>0?h-1:0]]}),u=a.exec(e)}return i},Bn=Zn(c.default),Un=Zn(s.default),Xn=We,Yn=Zn(qe);function Zn(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}function Vn(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function r(o,i){try{var a=n[o](i),u=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var Jn=null,Qn=Tn=p.FindCache=new Map;function et(e,n){Yn.validateFind(e,n);for(var t=[].concat(n),r=e.split(Bn.sep);r.length;){var o=r.join(Bn.sep);""===o&&(o=Bn.resolve(e,"/"));var i=!0,a=!1,u=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=c.value,l=Bn.join(o,f);try{return Un.accessSync(l,Un.R_OK),l}catch(e){}}}catch(e){a=!0,u=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw u}}r.pop()}return null}var nt=Yn.wrapExec(Xn.exec),tt=Yn.wrapExec(Xn.execNode),rt=p.exec=nt;Ln=p.execNode=tt;var ot=Object.freeze(u({__proto__:null,get execNode(){return Ln},get exec(){return rt},get tempFiles(){return Fn},get findCachedAsync(){return Hn},get findAsync(){return Rn},get FindCache(){return Tn},generateRange:Kn,find:zn,findCached:Gn,tempFile:Wn,parse:qn,default:p},[p]));exports.index=ot;
//# sourceMappingURL=index-62420427.js.map
